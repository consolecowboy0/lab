<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Useful functions for developing ML and AI processes • lab</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Useful functions for developing ML and AI processes">
<meta property="og:description" content="The goal of lab is to provide useful functionality for experimenting with the development of machine learning and articifical intelligence related algorithms.">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">lab</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="lab" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#lab" class="anchor"></a>lab <img src="reference/figures/logo.png" align="right" height="139">
</h1></div>
<!-- badges: start -->

<p>The goal of <strong>lab</strong> is to provide useful functionality for experimenting with the development of machine learning and articifical intelligence related algorithms. Specifically, <strong>lab</strong> serves as a laboratory for developing novel ML/RL/AI methods.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of <strong>lab</strong> from <a href="https://CRAN.R-project.org">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("lab") coming soon!</span></a></code></pre></div>
<p>And the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"mtnman38/lab"</span>)</a></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>The purpose of <strong>lab</strong> is to help you get started developing, experimenting, and testing different ML/RL/AI solutions on a variety of basic problems. What’s the point of this? Well, having a consistent structure to test a new method on allows you to easily reproduce results and understand when and how a certain method fails. This is obviously useful if you are interested in developing novel methods.</p>
<p>Let’s look at a very simple example that illustrates how to use this package. We will use the built in goose_game S3 class to see if we can build a very simple model to allow to goose to navigate the obstacles in the goose race. <strong>lab</strong> provides you with simple tools to get started, as well as importing a variety of handy libraries.</p>
<p>We first will initialize a goose_race and take a look at what we have.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(lab)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyverse)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; ── Attaching packages ────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.3.0 ──</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; ✓ ggplot2 3.3.0     ✓ purrr   0.3.3</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; ✓ tibble  2.1.3     ✓ dplyr   0.8.5</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; ✓ tidyr   1.0.2     ✓ stringr 1.4.0</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; ✓ readr   1.3.1     ✓ forcats 0.5.0</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; ── Conflicts ───────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; x dplyr::filter() masks stats::filter()</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; x dplyr::lag()    masks stats::lag()</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"></a>
<a class="sourceLine" id="cb3-12" data-line-number="12">gr &lt;-<span class="st"> </span><span class="kw"><a href="reference/goose_race.html">goose_race</a></span>()</a>
<a class="sourceLine" id="cb3-13" data-line-number="13">gr</a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt; $locations</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt; # A tibble: 100 x 3</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt;        x     y obstacle_present</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt;    &lt;int&gt; &lt;int&gt;            &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt;  1     1     1                0</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt;  2     1     2                0</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt;  3     1     3                0</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt;  4     1     4                0</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt;  5     1     5                0</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt;  6     1     6                0</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt;  7     1     7                1</span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">#&gt;  8     1     8                0</span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt;  9     1     9                0</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt; 10     1    10                0</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt; # … with 90 more rows</span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">#&gt; $starting_point</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31"><span class="co">#&gt; [1] 1 1</span></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="co">#&gt; $ending_point</span></a>
<a class="sourceLine" id="cb3-34" data-line-number="34"><span class="co">#&gt; [1] 10 10</span></a>
<a class="sourceLine" id="cb3-35" data-line-number="35"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-36" data-line-number="36"><span class="co">#&gt; $current_location</span></a>
<a class="sourceLine" id="cb3-37" data-line-number="37"><span class="co">#&gt; [1] 1 1</span></a>
<a class="sourceLine" id="cb3-38" data-line-number="38"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-39" data-line-number="39"><span class="co">#&gt; $on_obstacle</span></a>
<a class="sourceLine" id="cb3-40" data-line-number="40"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb3-41" data-line-number="41"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-42" data-line-number="42"><span class="co">#&gt; attr(,"class")</span></a>
<a class="sourceLine" id="cb3-43" data-line-number="43"><span class="co">#&gt; [1] "goose_race"</span></a></code></pre></div>
<p>You can see that we initialize a large 10x10 grid (stored in $locations as a tibble) along with a few other parameters, such as the starting and ending point of the goose race. The goal is to try and develop an algorithm to get the goose to the end of the race.</p>
<p>Let’s start by writing a function that extracts some features for us from our goose’s environment.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">extract_features &lt;-<span class="st"> </span><span class="cf">function</span>(gr) {</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">  obstacle_df &lt;-<span class="st"> </span><span class="kw"><a href="reference/look.html">look</a></span>(gr)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">  <span class="cf">if</span> (<span class="kw"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(obstacle_df) <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">    obstacle_df<span class="op">$</span>obstacle_present &lt;-<span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">  around_df &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(gr<span class="op">$</span>current_location[<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">                                    gr<span class="op">$</span>current_location[<span class="dv">1</span>] <span class="op">-</span><span class="st"> </span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">                                    gr<span class="op">$</span>current_location[<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span><span class="dv">0</span>,</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">                                    gr<span class="op">$</span>current_location[<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span><span class="dv">0</span>),</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">                              <span class="dt">y =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(gr<span class="op">$</span>current_location[<span class="dv">2</span>] <span class="op">+</span><span class="st"> </span><span class="dv">0</span>,</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">                                    gr<span class="op">$</span>current_location[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span><span class="dv">0</span>,</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">                                    gr<span class="op">$</span>current_location[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb4-12" data-line-number="12">                                    gr<span class="op">$</span>current_location[<span class="dv">2</span>] <span class="op">+</span><span class="st"> </span><span class="dv">1</span>),</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">                              <span class="dt">direction =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"north"</span>, <span class="st">"south"</span>, <span class="st">"east"</span>, <span class="st">"west"</span>))</a>
<a class="sourceLine" id="cb4-14" data-line-number="14">  feature_df &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">left_join</a></span>(around_df, obstacle_df, <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>))</a>
<a class="sourceLine" id="cb4-15" data-line-number="15">  <span class="cf">if</span> (<span class="kw"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(obstacle_df) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb4-16" data-line-number="16">    feature_df<span class="op">$</span>obstacle_present &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17">  feature_df<span class="op">$</span>obstacle_present[<span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(feature_df<span class="op">$</span>obstacle_present)] &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18">  feature_df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="st">    </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(direction, obstacle_present) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="st">    </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span>(<span class="dt">names_from =</span> direction, <span class="dt">values_from =</span> obstacle_present) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21"><span class="st">    </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">current_x =</span> gr<span class="op">$</span>current_location[<span class="dv">1</span>], <span class="dt">current_y =</span> gr<span class="op">$</span>current_location[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb4-22" data-line-number="22">}</a></code></pre></div>
<p>You can see how we might use this to try to build a basic model to guide the goose’s behavior in the goose_race. Let’s go through one random iteration first, so we can see how it might pan out.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">random_model &lt;-<span class="st"> </span><span class="cf">function</span>(gr) {</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">  movement &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/sample.html">sample</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="dv">2</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span>(movement)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">run_iteration &lt;-<span class="st"> </span><span class="cf">function</span>(gr, <span class="dt">n =</span> <span class="dv">20</span>) {</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">  df &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">north =</span> <span class="kw"><a href="https://rdrr.io/r/base/double.html">double</a></span>(),</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">                       <span class="dt">south =</span> <span class="kw"><a href="https://rdrr.io/r/base/double.html">double</a></span>(),</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">                       <span class="dt">east =</span> <span class="kw"><a href="https://rdrr.io/r/base/double.html">double</a></span>(),</a>
<a class="sourceLine" id="cb5-10" data-line-number="10">                       <span class="dt">west =</span> <span class="kw"><a href="https://rdrr.io/r/base/double.html">double</a></span>(),</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">                       <span class="dt">current_x =</span> <span class="kw"><a href="https://rdrr.io/r/base/double.html">double</a></span>(),</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">                       <span class="dt">current_y =</span> <span class="kw"><a href="https://rdrr.io/r/base/double.html">double</a></span>(),</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">                       <span class="dt">immediate_utility =</span> <span class="kw"><a href="https://rdrr.io/r/base/double.html">double</a></span>(),</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">                       <span class="dt">eventual_utility =</span> <span class="kw"><a href="https://rdrr.io/r/base/double.html">double</a></span>(),</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">                       <span class="dt">move_x =</span> <span class="kw"><a href="https://rdrr.io/r/base/double.html">double</a></span>(),</a>
<a class="sourceLine" id="cb5-16" data-line-number="16">                       <span class="dt">move_y =</span> <span class="kw"><a href="https://rdrr.io/r/base/double.html">double</a></span>())</a>
<a class="sourceLine" id="cb5-17" data-line-number="17">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>n) {</a>
<a class="sourceLine" id="cb5-18" data-line-number="18">    <span class="kw"><a href="https://rdrr.io/r/base/conditions.html">tryCatch</a></span>({</a>
<a class="sourceLine" id="cb5-19" data-line-number="19">      movement &lt;-<span class="st"> </span><span class="kw">random_model</span>()</a>
<a class="sourceLine" id="cb5-20" data-line-number="20">      features &lt;-<span class="st"> </span><span class="kw">extract_features</span>(gr)</a>
<a class="sourceLine" id="cb5-21" data-line-number="21">      gr &lt;-<span class="st"> </span><span class="kw"><a href="reference/move.html">move</a></span>(gr, movement[<span class="dv">1</span>], movement[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb5-22" data-line-number="22">      df &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/add_row.html">add_row</a></span>(df,</a>
<a class="sourceLine" id="cb5-23" data-line-number="23">                            <span class="dt">north =</span> features<span class="op">$</span>north,</a>
<a class="sourceLine" id="cb5-24" data-line-number="24">                            <span class="dt">south =</span> features<span class="op">$</span>south,</a>
<a class="sourceLine" id="cb5-25" data-line-number="25">                            <span class="dt">east =</span> features<span class="op">$</span>east,</a>
<a class="sourceLine" id="cb5-26" data-line-number="26">                            <span class="dt">west =</span> features<span class="op">$</span>west,</a>
<a class="sourceLine" id="cb5-27" data-line-number="27">                            <span class="dt">current_x =</span> features<span class="op">$</span>current_x,</a>
<a class="sourceLine" id="cb5-28" data-line-number="28">                            <span class="dt">current_y =</span> features<span class="op">$</span>current_y,</a>
<a class="sourceLine" id="cb5-29" data-line-number="29">                            <span class="dt">immediate_utility =</span> <span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(gr<span class="op">$</span>on_obstacle),</a>
<a class="sourceLine" id="cb5-30" data-line-number="30">                            <span class="dt">move_x =</span> movement[<span class="dv">1</span>],</a>
<a class="sourceLine" id="cb5-31" data-line-number="31">                            <span class="dt">move_y =</span> movement[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb5-32" data-line-number="32">        },</a>
<a class="sourceLine" id="cb5-33" data-line-number="33">      <span class="dt">error =</span> <span class="cf">function</span>(e) i &lt;-<span class="st"> </span>n</a>
<a class="sourceLine" id="cb5-34" data-line-number="34">      )</a>
<a class="sourceLine" id="cb5-35" data-line-number="35">  }</a>
<a class="sourceLine" id="cb5-36" data-line-number="36">  df<span class="op">$</span>eventual_utility &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(<span class="op">!</span>(<span class="ot">FALSE</span> <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(gr<span class="op">$</span>current_location <span class="op">==</span><span class="st"> </span>gr<span class="op">$</span>ending_point)))</a>
<a class="sourceLine" id="cb5-37" data-line-number="37">  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span>(df)</a>
<a class="sourceLine" id="cb5-38" data-line-number="38">}</a></code></pre></div>
<p>We’ve built out a simple model for moving our goose at random, but we are just building out a dataset. Soon, we will build a model and see if the goose can improve based on many iterations of the goose running the race.</p>
<p>First, lets run through the race about 100 times.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">run_everything &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  gr &lt;-<span class="st"> </span><span class="kw"><a href="reference/goose_race.html">goose_race</a></span>()</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="kw">run_iteration</span>(gr, <span class="dt">n =</span> <span class="dv">20</span>))</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb6-5" data-line-number="5"></a>
<a class="sourceLine" id="cb6-6" data-line-number="6">results &lt;-<span class="st"> </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map_dfr</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, run_everything)</a></code></pre></div>
<p>Now we can use our result set to build a very simple model. Then we can watch how it works out.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">model_x &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span>(eventual_utility <span class="op">~</span><span class="st"> </span>north <span class="op">+</span><span class="st"> </span>south <span class="op">+</span><span class="st"> </span>east <span class="op">+</span><span class="st"> </span>west <span class="op">+</span><span class="st"> </span>current_x <span class="op">+</span><span class="st"> </span>current_y,</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">               <span class="dt">data =</span> results[results<span class="op">$</span>move_y <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>results<span class="op">$</span>move_x <span class="op">==</span><span class="st"> </span><span class="dv">0</span>,],</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">               <span class="dt">family =</span> <span class="st">"binomial"</span>)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">model_y &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span>(eventual_utility <span class="op">~</span><span class="st"> </span>north <span class="op">+</span><span class="st"> </span>south <span class="op">+</span><span class="st"> </span>east <span class="op">+</span><span class="st"> </span>west <span class="op">+</span><span class="st"> </span>current_x <span class="op">+</span><span class="st"> </span>current_y,</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">               <span class="dt">data =</span> results[results<span class="op">$</span>move_x <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>results<span class="op">$</span>move_y <span class="op">==</span><span class="st"> </span><span class="dv">0</span>,],</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">               <span class="dt">family =</span> <span class="st">"binomial"</span>)</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">model_xy &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span>(eventual_utility <span class="op">~</span><span class="st"> </span>north <span class="op">+</span><span class="st"> </span>south <span class="op">+</span><span class="st"> </span>east <span class="op">+</span><span class="st"> </span>west <span class="op">+</span><span class="st"> </span>current_x <span class="op">+</span><span class="st"> </span>current_y,</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">                <span class="dt">data =</span> results[results<span class="op">$</span>move_x <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>results<span class="op">$</span>move_y <span class="op">==</span><span class="st"> </span><span class="dv">1</span>,],</a>
<a class="sourceLine" id="cb7-9" data-line-number="9">                <span class="dt">family =</span> <span class="st">"binomial"</span>)</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">model_neither &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span>(eventual_utility <span class="op">~</span><span class="st"> </span>north <span class="op">+</span><span class="st"> </span>south <span class="op">+</span><span class="st"> </span>east <span class="op">+</span><span class="st"> </span>west <span class="op">+</span><span class="st"> </span>current_x <span class="op">+</span><span class="st"> </span>current_y,</a>
<a class="sourceLine" id="cb7-11" data-line-number="11">                     <span class="dt">data =</span> results[results<span class="op">$</span>move_x <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>results<span class="op">$</span>move_y <span class="op">==</span><span class="st"> </span><span class="dv">0</span>,],</a>
<a class="sourceLine" id="cb7-12" data-line-number="12">                     <span class="dt">family =</span> <span class="st">"binomial"</span>)</a></code></pre></div>
<p>We can work with this for the example, but in practice we will likely need more complex models for this particular task. It is not difficult to reason out why that is so.</p>
<p>Let’s see how it does.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">gr &lt;-<span class="st"> </span><span class="kw"><a href="reference/goose_race.html">goose_race</a></span>()</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(gr)</a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-7-1.png" width="100%"></p>
<p>We can see our goose in the bottom right corner with all the obstacles. How should we proceed? We will consult the model.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">get_prediction &lt;-<span class="st"> </span><span class="cf">function</span>(gr) {</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">  purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">x =</span> model_x,</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">                  <span class="dt">y =</span> model_y, </a>
<a class="sourceLine" id="cb9-4" data-line-number="4">                  <span class="dt">xy =</span> model_xy,</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">                  <span class="dt">neither =</span> model_neither),</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">             <span class="cf">function</span>(x) <span class="kw"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(x,</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">                                 <span class="dt">newdata =</span> <span class="kw">extract_features</span>(gr),</a>
<a class="sourceLine" id="cb9-8" data-line-number="8">                                 <span class="dt">type =</span> <span class="st">"response"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>()</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb9-11" data-line-number="11"></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="kw">get_prediction</span>(gr)</a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">#&gt; Warning in predict.lm(object, newdata, se.fit, scale = 1, type = if (type == :</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">#&gt; prediction from a rank-deficient fit may be misleading</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"></a>
<a class="sourceLine" id="cb9-16" data-line-number="16"><span class="co">#&gt; Warning in predict.lm(object, newdata, se.fit, scale = 1, type = if (type == :</span></a>
<a class="sourceLine" id="cb9-17" data-line-number="17"><span class="co">#&gt; prediction from a rank-deficient fit may be misleading</span></a>
<a class="sourceLine" id="cb9-18" data-line-number="18"><span class="co">#&gt;        x.1        y.1       xy.1  neither.1 </span></a>
<a class="sourceLine" id="cb9-19" data-line-number="19"><span class="co">#&gt; 0.08720651 0.11175702 0.13106135 0.09262552</span></a></code></pre></div>
<p>So our super basic recommends that we move in to the upper right. <strong>lab</strong> gives us a very easy way to do this use goose_race.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">gr &lt;-<span class="st"> </span><span class="kw"><a href="reference/move.html">move</a></span>(gr, <span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">y =</span> <span class="dv">1</span>)</a></code></pre></div>
<p><strong>lab</strong> also gives us a way to visualize our movements. Just simply plot the goose_race class.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(gr)</a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-10-1.png" width="100%"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Dustin Landers <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/YOUR-ORCID-ID" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Dustin Landers.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
